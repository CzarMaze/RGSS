#encoding:utf-8
#==============================================================================
# ■  CardBattle::Spriteset_BattleWin
#------------------------------------------------------------------------------
#       戰鬥勝利精靈組
#==============================================================================
module CardBattle
class Spriteset_BattleWin
  #--------------------------------------------------------------------------
  # ● 定義實例變數
  #------------------ --------------------------------------------------------
  attr_reader :bonus
  #--------------------------------------------------------------------------
  # ● 初始化對象
  #--------------------------------------------------------------------------
  def initialize
    create_spritesets
  end
  #--------------------------------------------------------------------------
  # ● 產生精靈組
  #--------------------------------------------------------------------------
  def create_spritesets
    # 背景
    @back = Sprite.new
    @back.bitmap = Cache.win('Background')
    # 立繪
    @stand = Sprite_WinStand.new
    # 框架
    @frame = Sprite_WinFrame.new(self)
    # 文字
    @clear = Sprite_WinClear.new
    @clear.z = @frame.z + 10
    # 獎勵文字
    @bonus = []
    3.times do |i|
      @bonus[i] = Sprite_WinBonus.new
      @bonus[i].x = 513
      @bonus[i].y = [175,245,305][i]
      @bonus[i].z = @frame.z + 5
    end
  end
  #--------------------------------------------------------------------------
  # ● 釋放
  #--------------------------------------------------------------------------
  def dispose
    dispose_spritesets
  end
  #--------------------------------------------------------------------------
  # ● 釋放精靈組
  #--------------------------------------------------------------------------
  def dispose_spritesets
    @bonus.each {|s| s.dispose}
    @clear.dispose
    @stand.dispose
    @frame.dispose
    @back.dispose
  end
  #--------------------------------------------------------------------------
  # ● 更新
  #--------------------------------------------------------------------------
  def update
    update_spritesets
  end
  #--------------------------------------------------------------------------
  # ● 更新精靈組
  #--------------------------------------------------------------------------
  def update_spritesets
    @frame.update
    @stand.update
    @clear.update if !@frame.bonus_effect_now?
    @bonus.each {|s| s.update}
  end
  #--------------------------------------------------------------------------
  # ● 凍結等待？
  #--------------------------------------------------------------------------
  def freeze_wait?
    @frame.bonus_effect_now?
  end
end
end