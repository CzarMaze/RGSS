#encoding:utf-8
#==============================================================================
# ■  CardBattle::Spriteset_BattleLose
#------------------------------------------------------------------------------
#  戰鬥失敗精靈組
#==============================================================================
module CardBattle
class Spriteset_BattleLose
  #--------------------------------------------------------------------------
  # ● 初始化對象
  #--------------------------------------------------------------------------
  def initialize
    create_spritesets
  end
  #--------------------------------------------------------------------------
  # ● 產生精靈組
  #--------------------------------------------------------------------------
  def create_spritesets
    # 背景
    @back = Sprite.new
    @back.bitmap = Cache.lose('Background')
    # 覆蓋
    @cover = Sprite_LoseCover.new
    # 失敗原因
    @reason = Sprite_LoseReason.new
    # 失敗指令
    @cmds = []
    [:cmd_again,:cmd_title].each do |sym|
      @cmds.push(Sprite_LoseCommand.new(sym))
    end
  end
  #--------------------------------------------------------------------------
  # ● 釋放
  #--------------------------------------------------------------------------
  def dispose
    dispose_spritesets
  end
  #--------------------------------------------------------------------------
  # ● 釋放精靈組
  #--------------------------------------------------------------------------
  def dispose_spritesets
    @cmds.each {|s| s.dispose}
    @reason.dispose
    @cover.dispose
    @back.dispose
  end
  #--------------------------------------------------------------------------
  # ● 更新
  #--------------------------------------------------------------------------
  def update
    update_spritesets
  end
  #--------------------------------------------------------------------------
  # ● 更新精靈組
  #--------------------------------------------------------------------------
  def update_spritesets
    @cover.update
    @reason.update
    @cmds.each {|s| s.update}
  end
  #--------------------------------------------------------------------------
  # ● 將指令加入
  #--------------------------------------------------------------------------
  def add_cmd
    @cmds.each {|s| s.activate}
  end
  #--------------------------------------------------------------------------
  # ● 快轉
  #--------------------------------------------------------------------------
  def fast_forward
    (@cmds + [@cover]).each {|s| s.fast_forward}
  end
  #--------------------------------------------------------------------------
  # ● 是否在重新挑戰中？
  #--------------------------------------------------------------------------
  def in_again?
    @cmds[0].mouse_in_area?
  end
  #--------------------------------------------------------------------------
  # ● 是否在回到標題中？
  #--------------------------------------------------------------------------
  def in_title?
    @cmds[1].mouse_in_area?
  end
end
end